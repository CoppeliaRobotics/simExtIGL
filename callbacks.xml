<?xml version="1.0" encoding="UTF-8" standalone="no" ?>
<?xml-stylesheet type="text/xsl" href="callbacks.xsl"?>

<plugin name="IGL" author="federico.ferri.it@gmail.com">
    <description>Wrapper for libigl</description>
    <command name="meshBoolean">
        <description>Compute several boolean operations on the meshes specified by vertices and (triangle) indices</description>
        <categories>
            <category name="boolean-ops" />
        </categories>
        <params>
            <param name="a" type="mesh">
                <description>first mesh</description>
            </param>
            <param name="b" type="mesh">
                <description>second mesh</description>
            </param>
            <param name="op" type="int">
                <description>operation, see <enum-ref name="boolean_op" /></description>
            </param>
        </params>
        <return>
            <param name="result" type="mesh">
                <description>resulting mesh</description>
            </param>
        </return>
    </command>
    <command name="randomPointsOnMesh">
        <description>Randomly sample a mesh n times</description>
        <params>
            <param name="n" type="int">
                <description>num samples</description>
            </param>
            <param name="m" type="mesh">
                <description>mesh</description>
            </param>
            <param name="convertToWorldCoords" type="bool" default="false">
                <description>if true, output will be in world coords and not in barycentric coords</description>
            </param>
        </params>
        <return>
            <param name="b" type="grid" item-type="double" size="*,3">
                <description>list of barycentric/world coordinates, ith row are coordinates of ith sampled point in face FI[i]</description>
            </param>
            <param name="fi" type="grid" item-type="int">
                <description>list of indices into F</description>
            </param>
        </return>
    </command>
    <command name="sweptVolume">
        <description>Generate a volume-sweep mesh</description>
        <params>
            <param name="m" type="mesh">
                <description>mesh</description>
            </param>
            <param name="transformFunc" type="string">
                <description>rigid transform as a function of time (0..1); must return a 4x4 transform matrix as 12/16 values</description>
            </param>
            <param name="timeSteps" type="int">
                <description>number of time steps</description>
            </param>
            <param name="gridSize" type="int">
                <description>size of voxel grid internally used for mesh generation</description>
            </param>
            <param name="isoLevel" type="double" default="0">
                <description>can be set to zero to approximate the exact swept volume, greater than zero to approximate a positive offset of the swept volume or less than zero to approximate a negative offset</description>
            </param>
        </params>
        <return>
            <param name="m" type="mesh">
                <description>volume-sweep mesh</description>
            </param>
        </return>
    </command>
    <struct name="mesh">
        <param name="vertices" type="table" item-type="double">
            <description>vertices of the mesh (3 * n values)</description>
        </param>
        <param name="indices" type="table" item-type="int">
            <description>triangle indices of the mesh (3 * m indices, zero-based)</description>
        </param>
        <param name="normals" type="table" item-type="double" nullable="true">
            <description>per-vertex normals (3 * n values)</description>
        </param>
    </struct>
    <enum name="boolean_op" item-prefix="bool_op_" base="2630">
        <item name="union" />
        <item name="intersection" />
        <item name="difference" />
        <item name="symmetric_difference" />
        <item name="resolve" />
    </enum>
    <script-function name="transformCallback">
        <description>Callback used by <command-ref name="sweptVolume" />.</description>
        <params>
            <param name="t" type="double">
                <description>time parameter in 0..1 range</description>
            </param>
        </params>
        <return>
            <param name="transform" type="table" item-type="double">
                <description>a 4x4 transform matrix as 12/16 values</description>
            </param>
        </return>
    </script-function>
</plugin>
